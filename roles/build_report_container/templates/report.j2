<!DOCTYPE html>
<html>
<head>
  <title>{% if customer_name is defined %}{{ customer_name }} - {% endif %}Network Report - Job #{{ job_id | default('N/A') }}</title>
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="css/main.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
$(function() {
$( "#accordion > div" ).accordion({
    header: "h3",
    active: false,
collapsible: true
});
});
</script>
<style>
  .job-info-banner {
    background: rgba(238, 0, 0, 0.1);
    border: 1px solid #EE0000;
    border-radius: 4px;
    padding: 10px 20px;
    margin: 20px auto;
    max-width: 800px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }
  
  .job-info-item {
    color: #fff;
    margin: 5px 10px;
  }
  
  .job-info-label {
    color: #ccc;
    font-size: 12px;
    text-transform: uppercase;
    margin-right: 5px;
  }
  
  .job-info-value {
    color: #fff;
    font-weight: bold;
  }
  
  .back-to-archive {
    display: inline-block;
    margin: 20px;
    background: #EE0000;
    color: white !important;
    padding: 10px 15px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 14px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  
  .back-to-archive:hover {
    background: #CC0000;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    color: white !important;
  }
</style>
</head>
<body>
  <div style="text-align: left; padding: 10px;">
    <a href="../../" class="back-to-archive">‚Üê Back to Archive</a>
  </div>
  
  {% include 'header.j2' %}
<section>
<center>
<h1>
  {% if customer_name is defined %}
  {{ customer_name }} Network Infrastructure Report
  {% else %}
  Ansible Network Automation Example Report
  {% endif %}
</h1>
<p class="report-subtitle">{{ customer_full_name | default('') }}</p>

<div class="job-info-banner">
  <div class="job-info-item">
    <span class="job-info-label">Job ID:</span>
    <span class="job-info-value">#{{ job_id | default('N/A') }}</span>
  </div>
  <div class="job-info-item">
    <span class="job-info-label">Generated:</span>
    <span class="job-info-value">{{ job_timestamp | default('N/A') }}</span>
  </div>
  <div class="job-info-item">
    <span class="job-info-label">Template:</span>
    <span class="job-info-value">{{ lookup('env', 'AWX_JOB_TEMPLATE_NAME') | default('Manual Run') }}</span>
  </div>
  <div class="job-info-item">
    <span class="job-info-label">Devices:</span>
    <span class="job-info-value">{{ groups['network'] | length }}</span>
  </div>
</div>
</center>

<table class="main_net_table">
    <thead>
        <tr>
            <th>Network Device</th>
            <th>Layer 1</th>
            <th>Layer 2</th>
            <th>Layer 3</th>
        </tr>
    </thead>
    <tbody>
{% for network_switch in groups['network']|sort %}
{% if hostvars[network_switch].ansible_facts.network_resources is defined %}
        <tr>
            <td class="summary_info">
              <div id="hostname">
              <p class="hostname"><img class="router_image" src="router.png" alt="picture of network device">{{ hostvars[network_switch].ansible_net_hostname }}</p>
            </div>
              <div id="net_info_div">
              <table class="net_info">
              <tbody>
                <tr>
                  <td>Platform</td>
                  <td class="sub_net_info">{% set ansible_network_os = hostvars[network_switch]['ansible_net_system'] %}{{ vendor[ansible_network_os]}} {{hostvars[network_switch]['ansible_net_system'] }}</td>
                </tr>
                <tr>
                  <td>Code Version</td>
                  <td class="sub_net_info">{{ hostvars[network_switch]['ansible_net_version'] }}</td>
                </tr>
                <tr>
                  <td>Model</td>
                  <td class="sub_net_info">{{ hostvars[network_switch]['ansible_net_model'] }}</td>
                </tr>
                <tr>
                  <td>Serial Number</td>
                  <td class="sub_net_info">{{ hostvars[network_switch]['ansible_net_serialnum'] }}</td>
                </tr>
              </tbody>
              </table>


            {% include 'ansible.j2' %}
          </div>



            </td>

            <td>
            {% include 'interfaces.j2' %}
            </td>
            <td>
            {% include 'vlans.j2' %}
            {% include 'lldp_interfaces.j2' %}
            {% include 'l2_interfaces.j2' %}
            </td>
            <td>
            {% include 'l3_interfaces.j2' %}
            {% include 'lacp.j2' %}
            {% include 'static.j2' %}
            {% include 'bgp.j2' %}
            {% include 'bgp_address_family.j2' %}
            {% include 'ospf.j2' %}
            </td>
        </tr>
{% endif %}
{% endfor %}
    </tbody>
</table>
<center>
<p>{% if customer_name is defined %}Report prepared for {{ customer_full_name | default(customer_name) }}<br>{% endif %}
<strong>Report Generated:</strong> {{ job_timestamp | default('N/A') }} | <strong>Job ID:</strong> #{{ job_id | default('N/A') }}<br><br>
Created with</p><br><img src="webpage_logo.png" width="300" alt="red hat ansible automation platform logo">
<p>The source code to create this report can be found at <a href="https://github.com/network-automation/toolkit">https://github.com/network-automation/toolkit</a><br><br>
If you are new to Ansible Automation check out the following links:<br>
<a href="https://docs.ansible.com/ansible/latest/user_guide/intro_getting_started.html">Getting Started</a><br>
<a target="_blank" href="https://ansible.com/workshops">Free hands-on workshops</a><br>
<a href="https://youtube.com/ansibleautomation">Youtube Videos</a><br>
</p>
</center>
</section>
</div>
</body>
</html>
